기본적인 자바스크립트 지식은 있기 때문에 새롭게 알게되었거나 중요하다고 생각하는 부분만 정리합니다.

# 1. 데이터 타입

자바스크립트의 데이터 타입

- 기본형(원시형, primitive): number, string, boolean, null, undefined
- 참조형(reference): object > array, function, date, RegExp, Map, WeakMap, Set, WeakSet

메모리 용량이 월등히 커진 상황에서 자바스크립트가 생성되었다. 그래서 숫자의 경우 정수형, 부동소수형을 구분하지 않고 64비트(8바이트)를 확보한다.(자바,C 등의 언어는 메모리 낭비를 막기 위해 비트별로 나눔)

---

용어 정리

- 변수(variable): 변할 수 있는 수(무언가)
- 식별자(identifier): 어떤 데이터를 식별하는데 사용하는 이름. 변수명
- 변수(variable)와 상수(constant)를 구분하는 성질은 '변경 가능성'이다.
- 불변값과 상수는 다르다.

  - 변수와 상수를 구분 짓는 변경 가능성의 대상은 **변수 영역** 메모리다.(let vs const)
  - 불변셩 여부를 구분할 때의 변경 가능성의 대상은 **데이터 영역** 메모리다.(primitive vs reference)

---

데이터 할당

- 변수 영역과 데이터 영역으로 나누어지고 각각의 영역은 주소와 데이터 영역을 가진다.
- 같은 primitive를 여러 변수에 할당한다면 하나의 데이터 영역에 있는 주소와 데이터를 공유해서 사용한다. 즉 변수 영역은 여러개지만 데이터 영역은 하나다.
- 변수의 primitive가 변경되면 새로운 데이터 영역의 주소에 데이터를 할당하고 변수 영역의 데이터 값에서 참조하는 주소가 변경된다.
- reference를 다룰때는 데이터 영역의 데이터에 값을 저장하지 않고 객체의 변수 영역을 가리킨다. 그리고 객체의 변수 영역에서는 데이터 영역을 가리킨다. 만약 중첩 객체라면 데이터 영역에서 다시 중첩 객체의 변수 영역을 가리킨다. (데이터 영역안의 데이터 영역 같은 느낌. 이게 immutable과 mutable의 본질적인 차이다.)
- 참조 카운트: 어떤 데이터에 대해 자신의 주소를 참조하는 변수의 개수
- 참조 카운트가 0인 메모리는 gc의 수거 대상이다. 런타임 환경에 따라 특정 시점이나 메모리 사용량이 포화 상태에 임박할 때마다 자동으로 수거한다. 연쇄적으로 사라지는 경우도 있다.
- primitive와 reference 변수를 복사할 때 복사 과정은 동일하지만 데이터 할당 과정에서 이미 차이가 있기 때문에 변수 복사 이후의 동작에도 큰 차이가 발생한다.
  - 변수 영역의 데이터의 값에서 참고하는 주소값이 동일하다. primitive는 이 참고한 데이터 영역의 데이터에 값이 들어가지만, reference는 객체x의 변수 영역을 가리킨다. 그렇기 때문에 복사한 변수에 값을 재할당할 때 큰 차이가 발생한다.
- 대부분 자바스크립트에서 '기본형은 값을 복사하고 참조형은 주솟값을 복한다'고 설명하지만, 사실 자바스크립트의 모든 데이터 타입은 참조형 데이터다. 다만 기본형은 주솟값을 복사하는 과정이 한 번만 이뤄지고, 참조형은 한 단계를 더 거치게 된다는 차이가 있다.

ex)

```
var obj = {
  x: 3,
  arr: [3, 4, 5]
};

obj.arr = 'str';
```

<img src="./images/데이터할당.jpeg"/>

---

undefined와 null

- 비어있는 요소(array empty)와 undefined를 할당한 요소는 출력 결과부터 다르다.
- 사용자가 명시적으로 부여한 경우와 비어있는 요소에 접근하려 했을 때 반환되는 두 가지 경우의 'undefined'의 의미가 다르다. 전자는 고유의 키값(프로퍼티 이름)이 실존하고 순회의 대상이 되지만, 후자는 키값 자체가 존재하지 않다.
- 헷갈린다면 직접 undefined를 할당하지 않으면 된다. '비어있음'을 명시적으로 나타내고 싶으면 null을 사용하자.
- typeof null이 object인 것은 자바스크립트 버그다.

---

`내 생각`

데이터 할당 부분은 꽤 흥미로웠다. 이미 두꺼운 책을 본적이 있어서 배울게 있나? 했었는데 그래도 배울게 좀 있을 것 같다. 책도 짧고 어렵거나 핵심적인 부분만 담은 것 같아서 끝까지 읽어봐야겠다.

---
